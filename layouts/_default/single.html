{{ define "main"}}
  <h1>{{ .Title }}</h1>
  {{ partial "header.html" . }}
  {{ if not .Date.IsZero }}
  <!-- date -->
  {{ $singlePageDateFormat := .Site.Params.singlePageDateFormat | default "January 2, 2006"}}
  <p class="date">{{ .Date.Format $singlePageDateFormat }}</p>
  {{ end }}
  <!-- tags -->
  {{ if .Param "tags" }}
  <div id="tags">
    <ul>
      {{ range .Param "tags" }}
        {{ $name := . }}
        {{ with $.Site.GetPage (printf "/tags/%s" ($name | urlize)) }}
          <li><a href="{{ .Permalink }}">{{ $name }}</a></li>
        {{ end }}
      {{ end }}
    </ul>
  </div>
  <span id="{{ .RelPermalink }}" class="leancloud_visitors" data-flag-title="{{ .Title }}">
    <i class="post-meta-item-text">本文阅读量：</i>
    <i class="leancloud-visitors-count"></i>
</span>
  {{ end }}
  <!-- content -->
  <div id="contentBody">
    {{ .Content }}
  </div>
  <!-- Valine CMS -->
  <div style="max-width: 800px; margin: 0 auto; padding: 20px 0; text-align: center;">
    <center>끝</center>
    <hr>
    <center>评论区</center>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <div id="vcomments"></div>
  </div>
  <!-- Back to top -->
  <div title="返回顶部" id="backToTop" class="toTop">
    <i onclick="gotoTop();return false;" class="iconfont icon-fanhuidingbu1"></i>
  </div>
  <style type="text/css">
    div.toTop {
      position: fixed;
      right: 18px;
      bottom: 100px;
      margin: 0;
      padding: 0;
      display: none;
    }
    div.toTop i {
      font-size: 250%;
    }
    div.toTop i:hover {
      cursor: pointer;
      color: #33ba91;
    }
  </style>
  <script> 
    // 隐藏与显示返回顶部按钮
    window.onscroll = function() {
      if (document.documentElement.scrollTop + document.body.scrollTop > 100) {
        document.getElementById("backToTop").style.display = "block";
      } else {
        document.getElementById("backToTop").style.display = "none";
      }
    }

    // 平滑返回顶部脚本
    function gotoTop(acceleration,stime) {
      acceleration = acceleration || 0.1;
      stime = stime || 10;

      var x1 = 0;
      var y1 = 0;
      var x2 = 0;
      var y2 = 0;
      var x3 = 0;
      var y3 = 0; 

      if (document.documentElement) {
          x1 = document.documentElement.scrollLeft || 0;
          y1 = document.documentElement.scrollTop || 0;
      }
      if (document.body) {
          x2 = document.body.scrollLeft || 0;
          y2 = document.body.scrollTop || 0;
      }
      var x3 = window.scrollX || 0;
      var y3 = window.scrollY || 0;

      // 滚动条到页面顶部的水平距离
      var x = Math.max(x1, Math.max(x2, x3));
      // 滚动条到页面顶部的垂直距离
      var y = Math.max(y1, Math.max(y2, y3));

      // 滚动距离 = 目前距离 / 速度, 因为距离原来越小, 速度是大于 1 的数, 所以滚动距离会越来越小
      var speeding = 1 + acceleration;
      window.scrollTo(Math.floor(x / speeding), Math.floor(y / speeding));

      // 如果距离不为零, 继续调用函数
      if(x > 0 || y > 0) {
          var run = "gotoTop(" + acceleration + ", " + stime + ")";
          window.setTimeout(run, stime);
      }
    }
  </script>
  {{ partial "footer.html" . }}
{{ end }}
